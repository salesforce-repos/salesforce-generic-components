<template>
  <template if:true={records}>
    <div
      class="slds-grid slds-grid_vertical-align-center slds-var-m-top_x-large slds-grid_align-spread"
    >
      <div class="slds-col">
        <!--RECORDS PER PAGE-->
        <div
          style={paginationVisibility}
          class="slds-list_inline slds-p-bottom_xx-small customSelect"
        >
          <label
            class="slds-text-color_weak slds-p-horizontal_x-small"
            for="recordsPerPage"
            >Page Size:</label
          >
          <div class="slds-select_container">
            <select
              class="slds-select"
              id="recordsPerPage"
              onchange={handleRecordsPerPage}
            >
              <template for:each={pageSizeOptions} for:item="option">
                <option key={option} value={option}>{option}</option>
              </template>
            </select>
          </div>
        </div>
      </div>
      <div class="slds-col">
        <!--Search Box to Seach in Columns-->
        <div if:true={showSearchBox}>
          <div class="slds-p-horizontal_x-small slds-p-bottom_xx-small">
            <lightning-input
              label=""
              type="search"
              placeholder="Search"
              variant="label-hidden"
              onchange={handleKeyChange}
            ></lightning-input>
          </div>
        </div>
      </div>
    </div>

    <div
      class="slds-grid slds-grid_vertical-align-center slds-grid_align-spread"
    >
      <div class="slds-col">
        <div class="slds-col slds-p-bottom_xx-small">
          <span>
            <label class="slds-text-color_weak slds-p-horizontal_x-small"
              >Total: {filtredNum}</label
            >
          </span>
          <span>
            <label class="slds-text-color_weak slds-p-horizontal_x-small"
              >Selected: {totalSelected}</label
            >
          </span>
        </div>
      </div>
    </div>

    <div
      class="slds-grid slds-grid_vertical-align-center slds-grid_align-spread"
    >
      <div class="slds-col slds-size_1-of-1">
        <lightning-datatable
          key-field={keyField}
          data={recordsToDisplay}
          columns={_columns}
          max-row-selection={maxRowSelection}
          onrowselection={getSelectedRows}
          onrowaction={handleRowAction}
          selected-rows={preSelected}
          default-sort-direction={defaultSortDirection}
          sorted-direction={sortDirection}
          sorted-by={sortedBy}
          onsort={handelSort}
        >
        </lightning-datatable>
      </div>
    </div>

    <div style={paginationVisibility}>
      <lightning-layout
        multiple-rows
        class="slds-var-p-vertical_x-small slds-var-p-horizontal_small"
      >
        <lightning-layout-item size="4">
          <div class="slds-float_left">
            <label class="slds-text-color_weak" for="pageNum"
              >Page: {pageNumber}</label
            >
            <span>&nbsp;of&nbsp;<b id="totalPages">{totalPages}</b></span>
          </div>
        </lightning-layout-item>
        <lightning-layout-item size="4">
          <div class="slds-align_absolute-center">
            <a onclick={handleFirst}>
              <lightning-button-icon
                icon-name="utility:left"
                size="small"
                alternative-text="First"
              >
              </lightning-button-icon>
            </a>
            <a onclick={previousPage}>
              <lightning-button-icon
                icon-name="utility:chevronleft"
                size="small"
                alternative-text="Previous"
              >
              </lightning-button-icon>
            </a>
            <a onclick={nextPage}>
              <lightning-button-icon
                icon-name="utility:chevronright"
                size="small"
                alternative-text="Next"
              >
              </lightning-button-icon>
            </a>
            <a onclick={handleLast}>
              <lightning-button-icon
                icon-name="utility:right"
                size="small"
                alternative-text="Next"
              >
              </lightning-button-icon>
            </a>
          </div>
        </lightning-layout-item>
      </lightning-layout>
    </div>

    <div
      class="slds-grid slds-grid_vertical-align-center slds-grid_align-spread"
      style="padding-top: 0.5em"
    >
      <div class="slds-col"></div>
      <div class="slds-col">
        <!--PAGE NAVIGATION-->
        <div class="slds-col">
          <!--<div class="slds-col slds-p-bottom_xx-small">                     
                        <span>
                            <lightning-button-icon icon-name="utility:chevronleft" variant="bare" size="medium" alternative-text="Previous Page" onclick={previousPage}></lightning-button-icon>
                        </span>
                        <label class="slds-text-color_weak slds-p-horizontal_x-small" for="pageNum">Page: {pageNumber}</label> 
                        <span>&nbsp;of&nbsp;<b id="totalPages">{totalPages}</b></span>
                        <span>
                            <template if:true={pageNumber}></template>
                            <lightning-button-icon icon-name="utility:chevronright" variant="bare" size="medium" alternative-text="Next Page" onclick={nextPage} class="slds-p-horizontal_x-small"></lightning-button-icon>
                        </span>                                                          
                    </div>-->
        </div>
      </div>
    </div>

    <template if:true={editable}>
      <c-common-dialog title={title}>
        <span slot="body">
          <lightning-record-form
            record-id={recordId}
            object-api-name={objectName}
            layout-type="Full"
            mode="view"
          >
          </lightning-record-form>
        </span>
      </c-common-dialog>
    </template>
  </template>
</template>